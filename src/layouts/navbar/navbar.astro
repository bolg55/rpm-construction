---
import Logo from '@/components/logo.astro';
import Link from '@/components/ui/link.astro';
import menuItems from '@/data/menuItems';
import { Astronav, MenuIcon, MenuItems, StickyHeader } from 'astro-navbar';
import Dropdown from './dropdown.astro';

const pathname = Astro.url.pathname;
---

<StickyHeader
  class='mx-auto max-w-screen-2xl px-4 lg:px-8 sticky top-0 border-b z-20 transition-all flex flex-col lg:flex-row justify-between items-center'
  scrollY={50}
  defaultClass='py-5 border-transparent'
  activeClass='py-2 bg-white/80 border-gray-200 backgrop-blur-lg'
>
  <Astronav>
    <div class='flex w-full lg:w-auto items-center justify-between'>
      <Logo />
      <div class='block lg:hidden'>
        <MenuIcon class='w-6 h-6 text-gray-700' />
      </div>
    </div>
    <MenuItems class='hidden w-full lg:w-auto mt-2 lg:flex lg:gap-12'>
      <ul class='flex flex-col lg:items-center uppercase lg:flex-row lg:gap-12'>
        {
          menuItems.map((item, index) => (
            <>
              {item?.children.length > 0 && (
                <Dropdown
                  title={item.title}
                  children={item.children}
                  lastItem={index === menuItems.length - 1}
                />
              )}

              {!item.children.length && (
                <li class='relative group'>
                  <a
                    href={item.path}
                    class:list={[
                      'flex hover:text-accent p-2 lg:p-0 font-semibold tracking-widest transition-all ease-linear',
                      pathname === item.path
                        ? 'underline decoration-accent decoration-2 underline-offset-4'
                        : '',
                    ]}
                  >
                    {item.title}
                  </a>
                </li>
              )}
            </>
          ))
        }
      </ul>
      <div class='lg:hidden flex items-center mt-3 gap-4 flex-col w-full'>
        <Link
          href='/contact'
          size='md'
          style='secondary'
          class='flex gap-1 items-center justify-center'
          block
        >
          Contact Us
        </Link>
      </div>

      <div class='hidden lg:flex items-center'>
        <Link
          href='/contact'
          style='secondary'
          size='lg'
          class='flex gap-1 items-center justify-center'
        >
          Contact Us
        </Link>
      </div>
    </MenuItems>
  </Astronav>
</StickyHeader>
